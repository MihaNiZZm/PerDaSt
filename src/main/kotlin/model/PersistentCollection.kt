package com.github.mihanizzm.model

/**
 * Базовый контракт иммутабельной (персистентной) коллекции.
 *
 * - Любое «изменение» коллекции должно возвращать новую независимую версию,
 *   не затрагивая предыдущие версии.
 * - Коллекция является [Iterable], поэтому поддерживает итерацию по элементам.
 * - Конкретные реализации определяют допустимый набор операций, их сложность и
 *   дополнительные гарантии (например, упорядоченность).
 */
interface PersistentCollection<T> : Iterable<T> {
    /**
     * Количество логических позиций в коллекции.
     *
     * Величина [size] не меняется при операциях чтения и соответствует диапазону
     * допустимых индексов ([0, size)) для позиционно адресуемых структур.
     */
    val size: Int

    /**
     * Возвращает элемент по индексу или `null`, если элемент на позиции отсутствует.
     *
     * Предусловие: `index` должен лежать в диапазоне ([0, size)). Конкретные
     * реализации обязаны бросать [IllegalArgumentException] при выходе за пределы
     * диапазона.
     */
    operator fun get(index: Int): T?
}